

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Automatically generated documentation &mdash; DataONE Generic Member Node v0.beta documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.beta',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="DataONE Generic Member Node v0.beta documentation" href="index.html" />
    <link rel="next" title="Glossary" href="glossary.html" />
    <link rel="prev" title="PID level locking" href="impl-locking.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="glossary.html" title="Glossary"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="impl-locking.html" title="PID level locking"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">DataONE Generic Member Node v0.beta documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Automatically generated documentation</a><ul>
<li><a class="reference internal" href="#settings"><tt class="docutils literal"><span class="pre">settings</span></tt></a></li>
<li><a class="reference internal" href="#urls"><tt class="docutils literal"><span class="pre">urls</span></tt></a></li>
<li><a class="reference internal" href="#sys-log"><tt class="docutils literal"><span class="pre">sys_log</span></tt></a></li>
<li><a class="reference internal" href="#set-node-val"><tt class="docutils literal"><span class="pre">set_node_val</span></tt></a></li>
<li><a class="reference internal" href="#views"><tt class="docutils literal"><span class="pre">views</span></tt></a></li>
<li><a class="reference internal" href="#util"><tt class="docutils literal"><span class="pre">util</span></tt></a></li>
<li><a class="reference internal" href="#id1"><tt class="docutils literal"><span class="pre">urls</span></tt></a></li>
<li><a class="reference internal" href="#models"><tt class="docutils literal"><span class="pre">models</span></tt></a></li>
<li><a class="reference internal" href="#auth"><tt class="docutils literal"><span class="pre">auth</span></tt></a></li>
<li><a class="reference internal" href="#request-handler"><tt class="docutils literal"><span class="pre">request_handler</span></tt></a></li>
<li><a class="reference internal" href="#detail-codes"><tt class="docutils literal"><span class="pre">detail_codes</span></tt></a></li>
<li><a class="reference internal" href="#response-handler"><tt class="docutils literal"><span class="pre">response_handler</span></tt></a></li>
<li><a class="reference internal" href="#exception-handler"><tt class="docutils literal"><span class="pre">exception_handler</span></tt></a></li>
<li><a class="reference internal" href="#view-handler"><tt class="docutils literal"><span class="pre">view_handler</span></tt></a></li>
<li><a class="reference internal" href="#event-log"><tt class="docutils literal"><span class="pre">event_log</span></tt></a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="impl-locking.html"
                        title="previous chapter">PID level locking</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="glossary.html"
                        title="next chapter">Glossary</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/generated.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-settings">
<span id="automatically-generated-documentation"></span><h1>Automatically generated documentation<a class="headerlink" href="#module-settings" title="Permalink to this headline">¶</a></h1>
<div class="section" id="settings">
<h2><a class="reference internal" href="#module-settings" title="settings"><tt class="xref py py-mod docutils literal"><span class="pre">settings</span></tt></a><a class="headerlink" href="#settings" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Synopsis:</th><td class="field-body">App level settings.</td>
</tr>
</tbody>
</table>
</div>
<span class="target" id="module-urls"></span><div class="section" id="urls">
<h2><a class="reference internal" href="#module-urls" title="urls"><tt class="xref py py-mod docutils literal"><span class="pre">urls</span></tt></a><a class="headerlink" href="#urls" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Synopsis:</th><td class="field-body">Django URL to service mapping.</td>
</tr>
</tbody>
</table>
</div>
<span class="target" id="module-mn.sys_log"></span><div class="section" id="sys-log">
<h2><tt class="xref py py-mod docutils literal"><span class="pre">sys_log</span></tt><a class="headerlink" href="#sys-log" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="mn.sys_log.log">
<tt class="descclassname">mn.sys_log.</tt><tt class="descname">log</tt><big>(</big><em>log_flo</em>, <em>message</em><big>)</big><a class="headerlink" href="#mn.sys_log.log" title="Permalink to this definition">¶</a></dt>
<dd><p>Log a message with context.
:param log: The log to log to.
:type log: File like object.
:param message: The message to add to the log.
:type message: string
:return: None
:return type: NoneType</p>
</dd></dl>

</div>
<span class="target" id="module-mn.management.commands.set_node_val"></span><div class="section" id="set-node-val">
<h2><tt class="xref py py-mod docutils literal"><span class="pre">set_node_val</span></tt><a class="headerlink" href="#set-node-val" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Synopsis:</th><td class="field-body">Set a config value for the Member Node.</td>
</tr>
</tbody>
</table>
</div>
<span class="target" id="module-mn.views"></span><div class="section" id="views">
<h2><tt class="xref py py-mod docutils literal"><span class="pre">views</span></tt><a class="headerlink" href="#views" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Synopsis:</th><td class="field-body"><p class="first">REST call handlers.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body"><p class="first">DataONE (dahl)</p>
</td>
</tr>
<tr class="field"><th class="field-name">Dependencies:</th><td class="field-body"><ul class="first last simple">
<li>python 2.6</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="mn.views.access_policy_pid_put_workaround">
<tt class="descclassname">mn.views.</tt><tt class="descname">access_policy_pid_put_workaround</tt><big>(</big><em>request</em>, <em>pid</em><big>)</big><a class="headerlink" href="#mn.views.access_policy_pid_put_workaround" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mn.views.is_authorized">
<tt class="descclassname">mn.views.</tt><tt class="descname">is_authorized</tt><big>(</big><em>request</em>, <em>pid</em><big>)</big><a class="headerlink" href="#mn.views.assert_authorized" title="Permalink to this definition">¶</a></dt>
<dd><p>MNAuthorization.isAuthorized(pid, action) -&gt; Boolean</p>
<p>Test if the user identified by the provided token has authorization for
operation on the specified object.</p>
</dd></dl>

<dl class="function">
<dt id="mn.views.event_log_view">
<tt class="descclassname">mn.views.</tt><tt class="descname">event_log_view</tt><big>(</big><em>request</em><big>)</big><a class="headerlink" href="#mn.views.event_log_view" title="Permalink to this definition">¶</a></dt>
<dd><p>MNCore.getLogRecords(session, fromDate[, toDate][, event][, start=0]
[, count=1000]) → Log</p>
<p>Retrieve log information from the Member Node for the specified date range and
even type.</p>
</dd></dl>

<dl class="function">
<dt id="mn.views.monitor_object">
<tt class="descclassname">mn.views.</tt><tt class="descname">monitor_object</tt><big>(</big><em>request</em><big>)</big><a class="headerlink" href="#mn.views.monitor_object" title="Permalink to this definition">¶</a></dt>
<dd><p>MNCore.getObjectStatistics([format][, pid]) → ObjectStatistics</p>
<p>Returns the number of objects stored on the Member Node at the time the call
is serviced. The count may be restricted to a particular object format or a
filter on the PID.</p>
</dd></dl>

<dl class="function">
<dt id="mn.views.monitor_ping">
<tt class="descclassname">mn.views.</tt><tt class="descname">monitor_ping</tt><big>(</big><em>request</em><big>)</big><a class="headerlink" href="#mn.views.monitor_ping" title="Permalink to this definition">¶</a></dt>
<dd><p>MNCore.ping() → Boolean</p>
<p>Low level “are you alive” operation. A valid ping response is indicated by a
HTTP status of 200.</p>
</dd></dl>

<dl class="function">
<dt id="mn.views.monitor_status">
<tt class="descclassname">mn.views.</tt><tt class="descname">monitor_status</tt><big>(</big><em>request</em><big>)</big><a class="headerlink" href="#mn.views.monitor_status" title="Permalink to this definition">¶</a></dt>
<dd><p>MNCore.getStatus() → StatusResponse</p>
<p>This function is similar to MN_health.ping() but returns a more complete
status which may include information such as planned service outages.</p>
</dd></dl>

<dl class="function">
<dt id="mn.views.object">
<tt class="descclassname">mn.views.</tt><tt class="descname">object</tt><big>(</big><em>request</em><big>)</big><a class="headerlink" href="#mn.views.object" title="Permalink to this definition">¶</a></dt>
<dd><p>MNRead.listObjects(session[, startTime][, endTime][, objectFormat]
[, replicaStatus][, start=0][, count=1000]) → ObjectList</p>
<p>Retrieve the list of objects present on the MN that match the calling
parameters.</p>
</dd></dl>

<dl class="function">
<dt id="mn.views.object_pid_delete">
<tt class="descclassname">mn.views.</tt><tt class="descname">object_pid_delete</tt><big>(</big><em>request</em>, <em>pid</em><big>)</big><a class="headerlink" href="#mn.views.object_pid_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>MNStorage.delete(session, pid) → Identifier</p>
<p>Deletes an object from the Member Node, where the object is either a data
object or a science metadata object.</p>
</dd></dl>

<dl class="function">
<dt id="mn.views.test_delete_single_object">
<tt class="descclassname">mn.views.</tt><tt class="descname">test_delete_single_object</tt><big>(</big><em>request</em>, <em>pid</em><big>)</big><a class="headerlink" href="#mn.views.test_delete_single_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete an object from the Member Node, where the object is either a data
object or a science metadata object.</p>
<p>Note: The semantics for this method are different than for the production
method that deletes an object. This method removes all traces that the object
ever existed.</p>
</dd></dl>

</div>
<span class="target" id="module-mn.util"></span><div class="section" id="util">
<h2><tt class="xref py py-mod docutils literal"><span class="pre">util</span></tt><a class="headerlink" href="#util" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Synopsis:</th><td class="field-body">General utilities.</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="mn.util.add_datetime_filter">
<tt class="descclassname">mn.util.</tt><tt class="descname">add_datetime_filter</tt><big>(</big><em>query</em>, <em>request</em>, <em>column_name</em>, <em>param_name</em>, <em>operator</em><big>)</big><a class="headerlink" href="#mn.util.add_datetime_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Add datetime filter to a QuerySet. If the provided parameter name is
not present in the request, no filtering is performed.
:param query: The query to which to add the filters.
:type query: QuerySet
:param request: The request object to get parameter from.
:type request: HttpRequest
:param param_name: Name of URL parameter to get datetime from.
:type param_name: string
:param column_name: Table column name.
:type column_name: string
:return: Filtered query.
:return type: QuerySet</p>
</dd></dl>

<dl class="function">
<dt id="mn.util.add_slice_filter">
<tt class="descclassname">mn.util.</tt><tt class="descname">add_slice_filter</tt><big>(</big><em>query</em>, <em>request</em><big>)</big><a class="headerlink" href="#mn.util.add_slice_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a slice of a query based on request start and count parameters.</p>
</dd></dl>

<dl class="function">
<dt id="mn.util.add_string_filter">
<tt class="descclassname">mn.util.</tt><tt class="descname">add_string_filter</tt><big>(</big><em>query</em>, <em>request</em>, <em>column_name</em>, <em>param_name</em><big>)</big><a class="headerlink" href="#mn.util.add_string_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a string filter to a QuerySet. If the provided parameter name is
not present in the request, no filtering is performed.
:param query: The query to which to add the filters.
:type query: QuerySet
:param request: The request object to get parameter from.
:type request: HttpRequest
:param param_name: Name of URL parameter to get string from.
:type param_name: string
:param column_name: Table column name.
:type column_name: string
:return: Filtered query.
:return type: QuerySet</p>
</dd></dl>

<dl class="function">
<dt id="mn.util.add_wildcard_filter">
<tt class="descclassname">mn.util.</tt><tt class="descname">add_wildcard_filter</tt><big>(</big><em>query</em>, <em>col_name</em>, <em>value</em><big>)</big><a class="headerlink" href="#mn.util.add_wildcard_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Add wildcard filter to query. Support only a single * at start OR end</p>
</dd></dl>

<dl class="function">
<dt id="mn.util.clear_db">
<tt class="descclassname">mn.util.</tt><tt class="descname">clear_db</tt><big>(</big><big>)</big><a class="headerlink" href="#mn.util.clear_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the database. Used for testing and debugging.
:return:</p>
</dd></dl>

<dl class="function">
<dt id="mn.util.file_to_dict">
<tt class="descclassname">mn.util.</tt><tt class="descname">file_to_dict</tt><big>(</big><em>path</em><big>)</big><a class="headerlink" href="#mn.util.file_to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a sample MN object to dictionary.</p>
</dd></dl>

<dl class="class">
<dt id="mn.util.fixed_chunk_size_iterator">
<em class="property">class </em><tt class="descclassname">mn.util.</tt><tt class="descname">fixed_chunk_size_iterator</tt><big>(</big><em>flo</em>, <em>chunk_size=1048576</em>, <em>len=None</em><big>)</big><a class="headerlink" href="#mn.util.fixed_chunk_size_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a file iterator that iterates through file-like object using fixed
size chunks.
:return:</p>
<dl class="method">
<dt id="mn.util.fixed_chunk_size_iterator.next">
<tt class="descname">next</tt><big>(</big><big>)</big><a class="headerlink" href="#mn.util.fixed_chunk_size_iterator.next" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Param :</th><td class="field-body"></td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="mn.util.log_exception">
<tt class="descclassname">mn.util.</tt><tt class="descname">log_exception</tt><big>(</big><em>max_traceback_levels=5</em>, <em>msg=None</em><big>)</big><a class="headerlink" href="#mn.util.log_exception" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Param :</th><td class="field-body"></td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mn.util.pretty_xml">
<tt class="descclassname">mn.util.</tt><tt class="descname">pretty_xml</tt><big>(</big><em>xml_str</em>, <em>encoding='UTF-8'</em><big>)</big><a class="headerlink" href="#mn.util.pretty_xml" title="Permalink to this definition">¶</a></dt>
<dd><p>Pretty print XML.</p>
</dd></dl>

<dl class="function">
<dt id="mn.util.request_to_string">
<tt class="descclassname">mn.util.</tt><tt class="descname">request_to_string</tt><big>(</big><em>request</em><big>)</big><a class="headerlink" href="#mn.util.request_to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Pull some information about the client out from a request object.
:return:</p>
</dd></dl>

<dl class="function">
<dt id="mn.util.traceback_to_detail_code">
<tt class="descclassname">mn.util.</tt><tt class="descname">traceback_to_detail_code</tt><big>(</big><big>)</big><a class="headerlink" href="#mn.util.traceback_to_detail_code" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Param :</th><td class="field-body"></td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mn.util.validate_post">
<tt class="descclassname">mn.util.</tt><tt class="descname">validate_post</tt><big>(</big><em>request</em>, <em>parts</em><big>)</big><a class="headerlink" href="#mn.util.validate_post" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that a MMP POST contains all required sections.
:param parts: [(part_type, part_name), ...]
:return: None or raises exception.</p>
<p>Where information is stored in the request:
part_type header: request.META[&#8216;HTTP_&lt;UPPER CASE NAME&gt;&#8217;]
part_type file: request.FILES[&#8216;&lt;name&gt;&#8217;]
part_type field: request.POST[&#8216;&lt;name&gt;&#8217;]</p>
</dd></dl>

</div>
<span class="target" id="module-mn.urls"></span><div class="section" id="id1">
<h2><a class="reference internal" href="#module-urls" title="urls"><tt class="xref py py-mod docutils literal"><span class="pre">urls</span></tt></a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Synopsis:</th><td class="field-body">Django URL to function mapping.</td>
</tr>
</tbody>
</table>
</div>
<span class="target" id="module-mn.models"></span><div class="section" id="models">
<h2><tt class="xref py py-mod docutils literal"><span class="pre">models</span></tt><a class="headerlink" href="#models" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Synopsis:</th><td class="field-body">Database models.</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="mn.models.Checksum_algorithm">
<em class="property">class </em><tt class="descclassname">mn.models.</tt><tt class="descname">Checksum_algorithm</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mn.models.Checksum_algorithm" title="Permalink to this definition">¶</a></dt>
<dd><p>Checksum_algorithm(id, checksum_algorithm)</p>
</dd></dl>

<dl class="class">
<dt id="mn.models.DB_update_status">
<em class="property">class </em><tt class="descclassname">mn.models.</tt><tt class="descname">DB_update_status</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mn.models.DB_update_status" title="Permalink to this definition">¶</a></dt>
<dd><p>DB_update_status(id, mtime, status)</p>
</dd></dl>

<dl class="class">
<dt id="mn.models.Event_log">
<em class="property">class </em><tt class="descclassname">mn.models.</tt><tt class="descname">Event_log</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mn.models.Event_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Event_log(id, object_id, event_id, ip_address_id, user_agent_id, subject_id, date_logged)</p>
<dl class="method">
<dt id="mn.models.Event_log.set_event">
<tt class="descname">set_event</tt><big>(</big><em>event_string</em><big>)</big><a class="headerlink" href="#mn.models.Event_log.set_event" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Param :</th><td class="field-body"></td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mn.models.Event_log.set_ip_address">
<tt class="descname">set_ip_address</tt><big>(</big><em>ip_address_string</em><big>)</big><a class="headerlink" href="#mn.models.Event_log.set_ip_address" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Param :</th><td class="field-body"></td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mn.models.Event_log.set_subject">
<tt class="descname">set_subject</tt><big>(</big><em>subject_string</em><big>)</big><a class="headerlink" href="#mn.models.Event_log.set_subject" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Param :</th><td class="field-body"></td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mn.models.Event_log.set_user_agent">
<tt class="descname">set_user_agent</tt><big>(</big><em>user_agent_string</em><big>)</big><a class="headerlink" href="#mn.models.Event_log.set_user_agent" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Param :</th><td class="field-body"></td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mn.models.Event_log_event">
<em class="property">class </em><tt class="descclassname">mn.models.</tt><tt class="descname">Event_log_event</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mn.models.Event_log_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Event_log_event(id, event)</p>
</dd></dl>

<dl class="class">
<dt id="mn.models.Event_log_ip_address">
<em class="property">class </em><tt class="descclassname">mn.models.</tt><tt class="descname">Event_log_ip_address</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mn.models.Event_log_ip_address" title="Permalink to this definition">¶</a></dt>
<dd><p>Event_log_ip_address(id, ip_address)</p>
</dd></dl>

<dl class="class">
<dt id="mn.models.Event_log_member_node">
<em class="property">class </em><tt class="descclassname">mn.models.</tt><tt class="descname">Event_log_member_node</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mn.models.Event_log_member_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Event_log_member_node(id, member_node)</p>
</dd></dl>

<dl class="class">
<dt id="mn.models.Event_log_subject">
<em class="property">class </em><tt class="descclassname">mn.models.</tt><tt class="descname">Event_log_subject</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mn.models.Event_log_subject" title="Permalink to this definition">¶</a></dt>
<dd><p>Event_log_subject(id, subject)</p>
</dd></dl>

<dl class="class">
<dt id="mn.models.Event_log_user_agent">
<em class="property">class </em><tt class="descclassname">mn.models.</tt><tt class="descname">Event_log_user_agent</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mn.models.Event_log_user_agent" title="Permalink to this definition">¶</a></dt>
<dd><p>Event_log_user_agent(id, user_agent)</p>
</dd></dl>

<dl class="class">
<dt id="mn.models.Node">
<em class="property">class </em><tt class="descclassname">mn.models.</tt><tt class="descname">Node</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mn.models.Node" title="Permalink to this definition">¶</a></dt>
<dd><p>Node(id, key, val)</p>
</dd></dl>

<dl class="class">
<dt id="mn.models.Object">
<em class="property">class </em><tt class="descclassname">mn.models.</tt><tt class="descname">Object</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mn.models.Object" title="Permalink to this definition">¶</a></dt>
<dd><p>Object(id, pid, url, format_id, checksum, checksum_algorithm_id, mtime, db_mtime, size)</p>
<dl class="method">
<dt id="mn.models.Object.save_unique">
<tt class="descname">save_unique</tt><big>(</big><big>)</big><a class="headerlink" href="#mn.models.Object.save_unique" title="Permalink to this definition">¶</a></dt>
<dd><p>If attempting to save an object that has the same pid and/or url as an
old object, we delete the old object before saving the new.
TODO: This makes debugging easier but will need change when semantics of
update and delete are finalized.</p>
</dd></dl>

<dl class="method">
<dt id="mn.models.Object.set_checksum_algorithm">
<tt class="descname">set_checksum_algorithm</tt><big>(</big><em>checksum_algorithm_string</em><big>)</big><a class="headerlink" href="#mn.models.Object.set_checksum_algorithm" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Param :</th><td class="field-body"></td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mn.models.Object.set_format">
<tt class="descname">set_format</tt><big>(</big><em>format_string</em><big>)</big><a class="headerlink" href="#mn.models.Object.set_format" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Param :</th><td class="field-body"></td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mn.models.Object_format">
<em class="property">class </em><tt class="descclassname">mn.models.</tt><tt class="descname">Object_format</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mn.models.Object_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Object_format(id, format)</p>
</dd></dl>

<dl class="class">
<dt id="mn.models.Permission">
<em class="property">class </em><tt class="descclassname">mn.models.</tt><tt class="descname">Permission</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mn.models.Permission" title="Permalink to this definition">¶</a></dt>
<dd><p>Permission(id, object_id, subject_id, level)</p>
</dd></dl>

<dl class="class">
<dt id="mn.models.Replication_queue_source_node">
<em class="property">class </em><tt class="descclassname">mn.models.</tt><tt class="descname">Replication_queue_source_node</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mn.models.Replication_queue_source_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Replication_queue_source_node(id, source_node)</p>
</dd></dl>

<dl class="class">
<dt id="mn.models.Replication_queue_status">
<em class="property">class </em><tt class="descclassname">mn.models.</tt><tt class="descname">Replication_queue_status</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mn.models.Replication_queue_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Replication_queue_status(id, status)</p>
</dd></dl>

<dl class="class">
<dt id="mn.models.Replication_work_queue">
<em class="property">class </em><tt class="descclassname">mn.models.</tt><tt class="descname">Replication_work_queue</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mn.models.Replication_work_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Replication_work_queue(id, status_id, pid, source_node_id, checksum, checksum_algorithm_id, timestamp)</p>
</dd></dl>

<dl class="class">
<dt id="mn.models.Subject">
<em class="property">class </em><tt class="descclassname">mn.models.</tt><tt class="descname">Subject</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mn.models.Subject" title="Permalink to this definition">¶</a></dt>
<dd><p>Subject(id, subject)</p>
</dd></dl>

</div>
<span class="target" id="module-mn.auth"></span><div class="section" id="auth">
<h2><tt class="xref py py-mod docutils literal"><span class="pre">auth</span></tt><a class="headerlink" href="#auth" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Synopsis:</th><td class="field-body"><p class="first">Authentication and authorization.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body"><p class="first">DataONE (dahl)</p>
</td>
</tr>
<tr class="field"><th class="field-name">Dependencies:</th><td class="field-body"><ul class="first last simple">
<li>python 2.6</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="mn.auth.action_to_level">
<tt class="descclassname">mn.auth.</tt><tt class="descname">action_to_level</tt><big>(</big><em>action</em><big>)</big><a class="headerlink" href="#mn.auth.action_to_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Map action name to action level.</p>
</dd></dl>

<dl class="function">
<dt id="mn.auth.assert_allowed">
<tt class="descclassname">mn.auth.</tt><tt class="descname">assert_allowed</tt><big>(</big><em>subject</em>, <em>level</em>, <em>pid</em><big>)</big><a class="headerlink" href="#mn.auth.assert_allowed" title="Permalink to this definition">¶</a></dt>
<dd><p>Assert that subject is allowed to perform action on object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>subject</strong> (<em>str</em>) &#8211; Subject for which permissions are being asserted.</li>
<li><strong>level</strong> (<em>str</em>) &#8211; Action level for which permissions are being asserted.</li>
<li><strong>pid</strong> (<em>Identifier</em>) &#8211; Object for which permissions are being asserted.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">NoneType or raises NotAuthorized.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mn.auth.get_owner">
<tt class="descclassname">mn.auth.</tt><tt class="descname">get_owner</tt><big>(</big><em>pid</em><big>)</big><a class="headerlink" href="#mn.auth.get_owner" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the owner of an object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pid</strong> (<em>Identifier</em>) &#8211; Object</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">The subject that owns PID.
If PID does not exist, returns &#8220;DATAONE_UNKNOWN&#8221;.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">String</td>
</tr>
</tbody>
</table>
<p>&#8220;DATAONE_UNKNOWN&#8221; is returned for non-existing objects to prevent subjects
from learning about the existence of objects for which they do not have
permissions.</p>
</dd></dl>

<dl class="function">
<dt id="mn.auth.is_allowed">
<tt class="descclassname">mn.auth.</tt><tt class="descname">is_allowed</tt><big>(</big><em>subject</em>, <em>level</em>, <em>pid</em><big>)</big><a class="headerlink" href="#mn.auth.is_allowed" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if subject is allowed to perform action on object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>subject</strong> (<em>str</em>) &#8211; Subject for which permissions are being checked.</li>
<li><strong>level</strong> (<em>str</em>) &#8211; Action level for which permissions are being checked.</li>
<li><strong>pid</strong> (<em>Identifier</em>) &#8211; Object for which permissions are being checked.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">True if subject is allowed to perform action on object.
False if subject is not allowed to perform action on object.
False if subject does not exist.
False if PID does not exist.
False if level is invalid.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Boolean</p>
</td>
</tr>
</tbody>
</table>
<p>If subject holds permissions for one action level on object, all lower
action levels are also allowed.</p>
</dd></dl>

<dl class="function">
<dt id="mn.auth.level_to_action">
<tt class="descclassname">mn.auth.</tt><tt class="descname">level_to_action</tt><big>(</big><em>level</em><big>)</big><a class="headerlink" href="#mn.auth.level_to_action" title="Permalink to this definition">¶</a></dt>
<dd><p>Map action level to action name.</p>
</dd></dl>

<dl class="function">
<dt id="mn.auth.set_access_policy">
<tt class="descclassname">mn.auth.</tt><tt class="descname">set_access_policy</tt><big>(</big><em>pid</em>, <em>access_policy</em><big>)</big><a class="headerlink" href="#mn.auth.set_access_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply an AccessPolicy to an object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pid</strong> (<em>Identifier</em>) &#8211; Object to which AccessPolicy is applied.</li>
<li><strong>access_policy</strong> (<em>AccessPolicy</em>) &#8211; AccessPolicy to apply to object.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">NoneType or exception.</p>
</td>
</tr>
</tbody>
</table>
<p>Preconditions:</p>
<ul class="simple">
<li>Subject has changePermission for object.</li>
<li>The Django transaction middleware layer must be enabled.
&#8216;django.middleware.transaction.TransactionMiddleware&#8217;</li>
</ul>
</dd></dl>

</div>
<span class="target" id="module-mn.middleware.request_handler"></span><div class="section" id="request-handler">
<h2><tt class="xref py py-mod docutils literal"><span class="pre">request_handler</span></tt><a class="headerlink" href="#request-handler" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">platform:</th><td class="field-body">Linux</td>
</tr>
<tr class="field"><th class="field-name">Synopsis:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</div>
<span class="target" id="module-mn.middleware.detail_codes"></span><div class="section" id="detail-codes">
<h2><tt class="xref py py-mod docutils literal"><span class="pre">detail_codes</span></tt><a class="headerlink" href="#detail-codes" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Synopsis:</th><td class="field-body">Get Detail Code for DataONE exception based on REST call path.</td>
</tr>
</tbody>
</table>
</div>
<span class="target" id="module-mn.middleware.response_handler"></span><div class="section" id="response-handler">
<h2><tt class="xref py py-mod docutils literal"><span class="pre">response_handler</span></tt><a class="headerlink" href="#response-handler" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">platform:</th><td class="field-body">Linux</td>
</tr>
<tr class="field"><th class="field-name">Synopsis:</th><td class="field-body">Serialize DataONE response objects according to Accept header and set header
(Size and Content-Type) accordingly.</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="mn.middleware.response_handler.monitor_serialize_json">
<tt class="descclassname">mn.middleware.response_handler.</tt><tt class="descname">monitor_serialize_json</tt><big>(</big><em>monitor</em>, <em>jsonvar=False</em><big>)</big><a class="headerlink" href="#mn.middleware.response_handler.monitor_serialize_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialize object to JSON.
:return:</p>
</dd></dl>

<dl class="function">
<dt id="mn.middleware.response_handler.monitor_serialize_null">
<tt class="descclassname">mn.middleware.response_handler.</tt><tt class="descname">monitor_serialize_null</tt><big>(</big><em>monitor</em>, <em>jsonvar=False</em><big>)</big><a class="headerlink" href="#mn.middleware.response_handler.monitor_serialize_null" title="Permalink to this definition">¶</a></dt>
<dd><p>For now, this NULL serializer just calls out to the json serializer.
:return:</p>
</dd></dl>

<dl class="function">
<dt id="mn.middleware.response_handler.monitor_serialize_xml">
<tt class="descclassname">mn.middleware.response_handler.</tt><tt class="descname">monitor_serialize_xml</tt><big>(</big><em>monitor</em>, <em>jsonvar=False</em><big>)</big><a class="headerlink" href="#mn.middleware.response_handler.monitor_serialize_xml" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialize object to XML.
:return:</p>
</dd></dl>

<dl class="function">
<dt id="mn.middleware.response_handler.set_header">
<tt class="descclassname">mn.middleware.response_handler.</tt><tt class="descname">set_header</tt><big>(</big><em>response</em>, <em>last_modified</em>, <em>content_length</em>, <em>content_type</em><big>)</big><a class="headerlink" href="#mn.middleware.response_handler.set_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Add Last-Modified, Content-Length and Content-Type headers to response.</p>
<p>If last_modified is None, we pull the date from the one stored in the db.
:return:</p>
</dd></dl>

</div>
<span class="target" id="module-mn.middleware.exception_handler"></span><div class="section" id="exception-handler">
<h2><tt class="xref py py-mod docutils literal"><span class="pre">exception_handler</span></tt><a class="headerlink" href="#exception-handler" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Synopsis:</th><td class="field-body"><p class="first">Catch, log and serialize DataONE exceptions.</p>
<p>Implements the system for returning information about exceptional conditions
(errors) as described in Raised by MN and CN APIs
<a class="reference external" href="http://mule1.dataone.org/ArchitectureDocs/html">http://mule1.dataone.org/ArchitectureDocs/html</a></p>
<p>Exceptions:</p>
<p>AuthenticationTimeout
IdentifierNotUnique
InsufficientResources
InvalidCredentials
InvalidRequest
InvalidSystemMetadata
InvalidToken
NotAuthorized
NotFound
NotImplemented
ServiceFailure
UnsupportedMetadataType
UnsupportedType</p>
<p class="last">These are not related to Python&#8217;s exception system.</p>
</td>
</tr>
</tbody>
</table>
</div>
<span class="target" id="module-mn.middleware.view_handler"></span><div class="section" id="view-handler">
<h2><tt class="xref py py-mod docutils literal"><span class="pre">view_handler</span></tt><a class="headerlink" href="#view-handler" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">platform:</th><td class="field-body">Linux</td>
</tr>
<tr class="field"><th class="field-name">Synopsis:</th><td class="field-body">Sanity checking on system state before view is executed.</td>
</tr>
</tbody>
</table>
</div>
<span class="target" id="module-mn.event_log"></span><div class="section" id="event-log">
<h2><tt class="xref py py-mod docutils literal"><span class="pre">event_log</span></tt><a class="headerlink" href="#event-log" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Synopsis:</th><td class="field-body">Log DataONE object accesses.</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="mn.event_log.log">
<tt class="descclassname">mn.event_log.</tt><tt class="descname">log</tt><big>(</big><em>pid</em>, <em>event</em>, <em>request</em>, <em>timestamp=None</em><big>)</big><a class="headerlink" href="#mn.event_log.log" title="Permalink to this definition">¶</a></dt>
<dd><p>Log an object access.
:return:</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="glossary.html" title="Glossary"
             >next</a> |</li>
        <li class="right" >
          <a href="impl-locking.html" title="PID level locking"
             >previous</a> |</li>
        <li><a href="index.html">DataONE Generic Member Node v0.beta documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010,2011 Participating institutions in DataONE.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>