

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Register the MN &mdash; DataONE Generic Member Node 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="DataONE Generic Member Node 1.0.0 documentation" href="index.html" />
    <link rel="up" title="Setup steps" href="setup-steps.html" />
    <link rel="next" title="GMN Asynchronous Processes" href="setup-async.html" />
    <link rel="prev" title="DataONE Generic Member Node" href="setup-d1-gmn.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="setup-async.html" title="GMN Asynchronous Processes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="setup-d1-gmn.html" title="DataONE Generic Member Node"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">DataONE Generic Member Node 1.0.0 documentation</a> &raquo;</li>
          <li><a href="setup.html" >Setup</a> &raquo;</li>
          <li><a href="setup-steps.html" accesskey="U">Setup steps</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Register the MN</a><ul>
<li><a class="reference internal" href="#selecting-a-dataone-environment">Selecting a DataONE environment</a></li>
<li><a class="reference internal" href="#create-a-dataone-identify">Create a DataONE identify</a></li>
<li><a class="reference internal" href="#obtaining-a-client-side-certificate">Obtaining a client side certificate</a></li>
<li><a class="reference internal" href="#registering-the-mn-with-dataone">Registering the MN with DataONE</a></li>
<li><a class="reference internal" href="#revisit-the-gmn-configuration">Revisit the GMN configuration</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="setup-d1-gmn.html"
                        title="previous chapter">DataONE Generic Member Node</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="setup-async.html"
                        title="next chapter">GMN Asynchronous Processes</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/setup-registration.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="register-the-mn">
<h1>Register the MN<a class="headerlink" href="#register-the-mn" title="Permalink to this headline">¶</a></h1>
<p>Registering the MN is a two step process. First, a client side certificate is
obtained for the MN. The MN will use the client side certificate to identify
itself in all calls to DataONE nodes.</p>
<p>Second, an XML document, called a Node document is submitted to a DataONE
CN. The document contains the information required by the DataONE infrastructure
to interact with the MN.</p>
<div class="section" id="selecting-a-dataone-environment">
<h2>Selecting a DataONE environment<a class="headerlink" href="#selecting-a-dataone-environment" title="Permalink to this headline">¶</a></h2>
<p>In addition the the default production environment, DataONE maintains several
separate environments for use when developing and testing DataONE components.
There are no connections between the environments. For instance, certificates,
DataONE identities and science objects are exclusive to the environment in
which they were created.</p>
<p>The environments are:</p>
<ul class="simple">
<li><strong>Development</strong>: Unstable components under active development.</li>
<li><strong>Staging</strong>: Testing of release candiates.</li>
<li><strong>Sandbox</strong>: Like Production, but open to test instances of MNs. May contain
both test and real science objects.</li>
<li><strong>Production</strong>: Stable production environment for use by the public.</li>
</ul>
<p>You may chose to register this MN deployment in the Production environment.
However, if this deployment is more experimental in nature, for instance, if the
purpose is to learn more about the DataONE infrastructure or if this MN will
be populated with objects that may not be of production quality, then one of
the other environments should be selected.</p>
<p>Depending on which environment you select, substitute <strong>&lt;env&gt;</strong> in the
instructions below with one of:</p>
<div class="highlight-python"><pre>https://cn-dev.dataone.org
https://cn-stage.dataone.org
https://cn-sandbox.dataone.org
https://cn.dataone.org</pre>
</div>
</div>
<div class="section" id="create-a-dataone-identify">
<h2>Create a DataONE identify<a class="headerlink" href="#create-a-dataone-identify" title="Permalink to this headline">¶</a></h2>
<p>Use the DataONE Identity Manager to create a DataONE identity for the
administrator / contact for the new MN.</p>
<p>Visit <strong>&lt;env&gt;</strong>/portal/ and follow the instructions.</p>
</div>
<div class="section" id="obtaining-a-client-side-certificate">
<h2>Obtaining a client side certificate<a class="headerlink" href="#obtaining-a-client-side-certificate" title="Permalink to this headline">¶</a></h2>
<p>Contact DataONE to request a certificate for the MN. Specify the environment
for which you require a certificate.</p>
</div>
<div class="section" id="registering-the-mn-with-dataone">
<h2>Registering the MN with DataONE<a class="headerlink" href="#registering-the-mn-with-dataone" title="Permalink to this headline">¶</a></h2>
<p>Each DataONE Node has an XML document associated with it that describes the
various aspects of the Node, such as its URL, the services it supports and who
maintains and runs the Node. For now, it is necessary to manually edit this
file with information specific to this MN. A template is provided to simplify
this process.</p>
<blockquote>
<div><p>Customize the Node document.</p>
<p>Copy the Node XML template:</p>
<div class="highlight-python"><pre>$ cd /var/local/dataone/mn_generic/service/stores/static/
$ cp nodeRegistry_template.xml nodeRegistry.xml</pre>
</div>
<p>Edit the document:</p>
<blockquote>
<div><p>Edit
<tt class="docutils literal"><span class="pre">/var/local/dataone/mn_generic/service/stores/static/nodeRegistry.xml</span></tt>.</p>
<p>Replace the upper case texts with information specific to your MN. The parts
of the document that do not contain upper case text should remain unchanged.</p>
<ul class="simple">
<li><strong>identifier</strong>: A unique identifier for the node. This may initially be
the same as the baseURL, however this value should not change for future
implementations of the same node, whereas the baseURL may change in the
future.</li>
<li><strong>name</strong>: A human readable name of the Node.</li>
<li><strong>description</strong>: Description of content maintained by this node and any
other free style notes.</li>
<li><strong>baseURL</strong>: The URL at which the Node is available.</li>
<li><strong>contactSubject</strong>: The subject field exactly as it is displayed in the
DataONE Identity Manager. See <a class="reference internal" href="#create-a-dataone-identify">Create a DataONE identify</a></li>
</ul>
<p>For more information about the Node document, refer to
<a class="reference external" href="http://mule1.dataone.org/ArchitectureDocs-current/apis/Types.html#Types.Node">http://mule1.dataone.org/ArchitectureDocs-current/apis/Types.html#Types.Node</a></p>
</div></blockquote>
</div></blockquote>
<p>To register the new MN with DataONE, the Node XML document is submitted to
DataONE via a CN REST API. The connection to DataONE is made over TLS/SSL,
with the client side certificate that DataONE issued. See <a class="reference internal" href="#obtaining-a-client-side-certificate">Obtaining a client
side certificate</a></p>
<p>A command line tool is provided for submitting the registration.</p>
<blockquote>
<div><p>Register the MN with DataONE:</p>
<div class="highlight-python"><pre>$ cd /var/local/dataone/mn_generic/tools
$ python register.py \
  --cert-path &lt;path to the DataONE issued MN client side certificate&gt; \
  --cert-key &lt;path to the DataONE issued MN client side certificate key&gt; \
  ../service/stores/static/nodeRegistry.xml</pre>
</div>
</div></blockquote>
<p>A new MN must be approved by DataONE. The person that is registered as
<em>contactSubject</em> in the Node document, will be contacted by email with the
outcome of the approval process.</p>
</div>
<div class="section" id="revisit-the-gmn-configuration">
<h2>Revisit the GMN configuration<a class="headerlink" href="#revisit-the-gmn-configuration" title="Permalink to this headline">¶</a></h2>
<p>In the <a class="reference internal" href="setup-d1-gmn.html"><em>DataONE Generic Member Node</em></a> step, setting the NODE_IDENTIFIER value was deferred
because it must be set up to match the value configured in this step.</p>
<blockquote>
<div><p>Edit: <tt class="docutils literal"><span class="pre">/var/local/dataone/mn_generic/service/settings_site.py</span></tt></p>
<ul class="simple">
<li>Set NODE_IDENTIFIER to match the value specified in the identifier field
in the Node XML document.</li>
</ul>
</div></blockquote>
<p><tt class="xref doc docutils literal"><span class="pre">setup-workers</span></tt></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="setup-async.html" title="GMN Asynchronous Processes"
             >next</a> |</li>
        <li class="right" >
          <a href="setup-d1-gmn.html" title="DataONE Generic Member Node"
             >previous</a> |</li>
        <li><a href="index.html">DataONE Generic Member Node 1.0.0 documentation</a> &raquo;</li>
          <li><a href="setup.html" >Setup</a> &raquo;</li>
          <li><a href="setup-steps.html" >Setup steps</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010,2011 Participating institutions in DataONE.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>