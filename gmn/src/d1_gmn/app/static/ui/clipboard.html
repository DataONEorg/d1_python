<?xml version="1.0" encoding="UTF-8"?>

<!--
As of 2019-06, it appears not to be possible to programmatically copy text to the
clipboard from an HTML document generated by an XSLT stylesheet.

The error message, "execCommand is only supported on HTML documents", probably indicates
that ``execCommand`` can only access the underlying XML document.

This page is a workaround. It is a Jinja2 template generated server side served to the
browser as plain HTML, which enables access to the clipboard via execCommand.

The Copy buttons on XSLT based pages just open this page after which the user has to
click the new Copy button in order to actualy complete the copy.
-->

<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "DTD/xhtml1-strict.dtd">

<html xml:lang="en" lang="en">


<head>
  <meta charset="UTF-8" content="text/xhtml; charset=UTF-8"/>
  <title>
    Copy to Clipboard
  </title>
  <script
      src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"
      type="text/javascript"></script>
  <link href="d1type.css" rel="stylesheet"
        type="text/css"/>
  <script src="d1type.js" type="text/javascript"></script>

  <script type="text/javascript">
    $(function () {
      const urlParams = new URLSearchParams(window.location.search);
      // alert(urlParams.get('clip'));
      $("#identifier").text(urlParams.get('clip'));

      // $("form").submit(function (event) {
      //   const url_input = $("#url-input").val();
      //   window.location.href = 'new/' + encodeURIComponent(url_input) + '/';
      //   event.preventDefault();
      // });
    });
  </script>

</head>

<body>
<div class="container">
  <!--<div class="flex-head">-->
  <div class="container-grid">
    <div class="header-left">
    </div>
    <div class="header-right">
    </div>

    <div class="sidebar">
      <div class="flex-vert">

        <!--left panel top-->
        <div>
        </div>
      </div>

      <!-- left panel bottom -->
      <!--<div>-->
      <!--</div>-->
    </div>

    <!--right panel-->
    <div class="flex-vert">
      <div>
        <div class="copy-identifier-row">
          <div class="copy-identifier">
            Copy to Clipboard
          </div>
        </div>

        <div class="copy-identifier-row">
          <div class="copy-identifier">PID</div>

          <label for="identifier"><textarea id="identifier" class="copy-identifier"
                                            cols="50" rows="1"
                                            readonly="readonly">
              {{ did }}
              </textarea>
          </label>
          <a class="center-button nav-button " href="#"
             onclick="copy_to_clipboard()">Copy</a>
        </div>

      </div>
      <div class="nav-outer">
        <div class="d1-type">


        </div>
      </div>
    </div>
  </div>

  <!-- right panel bottom -->
  <!--<div>-->
  <!--</div>-->

  <div class="footer">
    <div class="copyright">
      Copyright Â© 2018 Participating institutions in DataONE
    </div>
  </div>

</div>
</body>
</html>
