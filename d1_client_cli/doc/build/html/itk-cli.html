

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>DataONE Command Line Client (CLI) &mdash; DataONE Command Line Client vbeta documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     'beta',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="DataONE Command Line Client vbeta documentation" href="index.html" />
    <link rel="prev" title="DataONE Command Line Interface (CLI)" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="index.html" title="DataONE Command Line Interface (CLI)"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">DataONE Command Line Client vbeta documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">DataONE Command Line Client (CLI)</a><ul>
<li><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li><a class="reference internal" href="#operation">Operation</a></li>
<li><a class="reference internal" href="#parameters">Parameters</a></li>
<li><a class="reference internal" href="#operations">Operations</a><ul>
<li><a class="reference internal" href="#create">create</a></li>
<li><a class="reference internal" href="#get">get</a></li>
<li><a class="reference internal" href="#meta">meta</a></li>
<li><a class="reference internal" href="#list">list</a></li>
<li><a class="reference internal" href="#search">search</a></li>
<li><a class="reference internal" href="#fields">Fields</a></li>
<li><a class="reference internal" href="#objectformats">objectformats</a></li>
<li><a class="reference internal" href="#resolve">resolve</a></li>
<li><a class="reference internal" href="#log">log</a></li>
<li><a class="reference internal" href="#set-defaults">Set Defaults</a></li>
</ul>
</li>
<li><a class="reference internal" href="#user-stories">User stories</a><ul>
<li><a class="reference internal" href="#id1">objectformats</a></li>
<li><a class="reference internal" href="#id2">resolve</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">DataONE Command Line Interface (CLI)</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/itk-cli.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="dataone-command-line-client-cli">
<h1>DataONE Command Line Client (CLI)<a class="headerlink" href="#dataone-command-line-client-cli" title="Permalink to this headline">¶</a></h1>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p>The DataONE command line client simplifies access to low level operations of
the DataONE infrastructure.</p>
</div>
<div class="section" id="operation">
<h2>Operation<a class="headerlink" href="#operation" title="Permalink to this headline">¶</a></h2>
<p>Basic syntax:</p>
<div class="highlight-python"><pre>dataone.py [parameters] operation arguments</pre>
</div>
</div>
<div class="section" id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--dataone-url <var>URL</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>DataONE root</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--mn-url <var>URL</var></span></kbd></td>
<td>Member node</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--cn-url <var>URL</var></span></kbd></td>
<td>Coordinating node</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--cert-path <var>CERT_FILE</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Filesystem path to client certificate</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--key-path <var>KEY_FILE</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Filesystem path to the client certificate key</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--anonymous</span></kbd></td>
<td>Ignore any installed certificates and connect anonymously</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--sysmeta-object-format <var>FMTID</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Specify the object format ID for system metadata</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--sysmeta-submitter <var>S_SUBJECT</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Specify the subject of the submitter in system metadata</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--sysmeta-rightsholder <var>R_SUBJECT</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Subject of the rights holder in system metadata</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--sysmeta-origin-member-node <var>O_MN</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Set the origin member node identifier in the system metadata</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--sysmeta-authoritative-member-node <var>A_MN</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Set the authoritative member node identifier in the system metadata</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--sysmeta-access-policy</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Set the access policy to be stored in the system metadata</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--sysmeta-access-policy-public</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>If present, the system metadata will have public access policy</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--start-time <var>STARTTIME</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>The start time for operations that accept a time range</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--end-time <var>ENDTIME</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>The end time for operations that accept a time range</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--object-format <var>FMTID</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Object format for requests</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--query <var>QUERY</var></span></kbd></td>
<td>Query string (<a href="#id3"><span class="problematic" id="id4">SOLR_</span></a> or Lucene query syntax) for searches</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--fields <var>FIELDS</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Comma delimited list of index fields to return in search responses</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--output <var>FILE</var></span></kbd></td>
<td>Store data to file instead of writing it to StdOut</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--pretty</span></kbd></td>
<td>Render Pretty Printed XML</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--verbose</span></kbd></td>
<td>Display more information</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--slice-start <var>START</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Start position for sliced resultset</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--slice-count <var>COUNT</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Max number of elements in sliced resultset</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--store-config</span></kbd></td>
<td>Store config variables and exit. Configuration defaults are stored
in <tt class="docutils literal"><span class="pre">$HOME/.d1client.conf</span></tt></td></tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="operations">
<h2>Operations<a class="headerlink" href="#operations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="create">
<h3>create<a class="headerlink" href="#create" title="Permalink to this headline">¶</a></h3>
<p>Add content to a member node:</p>
<div class="highlight-python"><pre>dataone.py --sysmeta-object-format FMTID
          [--mn-url URL ]
          [--sysmeta-submitter S_SUBJECT]
          [--sysmeta-rightsholder R_SUBJEC]
          [--sysmeta-origin-member-node O_MN]
          [--sysmeta-authoritative-member-node A_MN]
          [--sysmeta-access-policy-public]
          [--cert-path CERT_FILE]
          [--key-path KEY_FILE]
 create PID OBJECT_PATH</pre>
</div>
<p><strong>Example</strong></p>
<div class="highlight-python"><pre>dataone.py --sysmeta-object-format text/csv \
  --sysmeta-submitter "CN=MATTJTEMP,DC=dataone,DC=org" \
  --sysmeta-rightsholder "CN=MATTJTEMP,DC=dataone,DC=org" \
  --sysmeta-origin-member-node DEMO1 \
  --sysmeta-authoritative-member-node DEMO1 \
  --mn-url https://demo1.test.dataone.org/knb/d1/mn/v1 \
  --cert-path /etc/dataone/client/certs/myclientcert.pem \
  --sysmeta-access-policy-public \
  create demo1.2.1 data/data-samples.csv</pre>
</div>
</div>
<div class="section" id="get">
<h3>get<a class="headerlink" href="#get" title="Permalink to this headline">¶</a></h3>
<p>Retrieve content from a member or coordinating node:</p>
<div class="highlight-python"><pre>dataone.py [--dataone-url URL]
           [--cert-path CERT_FILE]
           [--key-path KEY_FILE]
 get PID</pre>
</div>
<p><strong>Example</strong></p>
<div class="highlight-python"><pre>dataone.py --dataone-url https:/cn-dev.dataone.org/cn/v1 get demo3_3_2</pre>
</div>
</div>
<div class="section" id="meta">
<h3>meta<a class="headerlink" href="#meta" title="Permalink to this headline">¶</a></h3>
<p>Retrieve system metadata for an object:</p>
<div class="highlight-python"><pre>dataone.py [--dataone-url URL]
           [--cert-path CERT_FILE]
           [--key-path KEY_FILE]
 meta PID</pre>
</div>
<p><strong>Example</strong></p>
<div class="highlight-python"><pre>dataone.py --pretty --dataone-url https:/cn-dev.dataone.org/cn/v1 meta demo3_3_2</pre>
</div>
</div>
<div class="section" id="list">
<h3>list<a class="headerlink" href="#list" title="Permalink to this headline">¶</a></h3>
<p>List objects on a member or coordinating node:</p>
<div class="highlight-python"><pre>dataone.py [--mn-url URL]
           [--cert-path CERT_FILE]
           [--key-path KEY_FILE]
           [--start-time STARTTIME]
           [--end-time ENDTIME]
           [--object-format FMTID]
           [--slice-start START]
           [--slice-count COUNT]
           [--pretty]
 list</pre>
</div>
<p><strong>Example</strong></p>
<div class="highlight-python"><pre>dataone.py --anonymous \
           --mn-url=https://cn-dev.dataone.org/cn/v1 \
           --slice-count 10 \
           list</pre>
</div>
</div>
<div class="section" id="search">
<h3>search<a class="headerlink" href="#search" title="Permalink to this headline">¶</a></h3>
<p>Search system and science metadata indexed by a coordinating node:</p>
<div class="highlight-python"><pre>dataone.py [--cn-url URL]
           [--query QUERY]
           [--fields FIELDS] search</pre>
</div>
<p><strong>Examples</strong></p>
<p>Find objects with origin member node ID = &#8220;DEMO3&#8221;:</p>
<div class="highlight-python"><pre>dataone.py --cn_url="https://cn-dev.dataone.org/cn" --query "origin_mn:DEMO3" search</pre>
</div>
<p>Find objects that contain the text &#8220;barnacle&#8221; anywhere in system or science metadata:</p>
<div class="highlight-python"><pre>dataone.py --cn_url="https://cn-dev.dataone.org/cn" --query "barnacle" search</pre>
</div>
<p>Find objects of type &#8220;text/csv&#8221; that originated from member node ID = DEMO3:</p>
<div class="highlight-python"><pre>dataone.py --cn-url="https://cn-dev.dataone.org/cn" \
           --query "origin_mn:DEMO3 AND objectformat:text/csv" search</pre>
</div>
</div>
<div class="section" id="fields">
<h3>Fields<a class="headerlink" href="#fields" title="Permalink to this headline">¶</a></h3>
<p>Return a list of fields available for search and retrieval from the
coordinating node index.</p>
<blockquote>
<div>dataone.py [&#8211;cn-url URL] fields</div></blockquote>
<p><strong>Examples</strong></p>
<blockquote>
<div>dataone.py &#8211;cn-url=&#8221;<a class="reference external" href="https://cn-dev.dataone.org/cn">https://cn-dev.dataone.org/cn</a>&#8221; fields</div></blockquote>
</div>
<div class="section" id="objectformats">
<h3>objectformats<a class="headerlink" href="#objectformats" title="Permalink to this headline">¶</a></h3>
<p>Retrieve list of object formats</p>
</div>
<div class="section" id="resolve">
<h3>resolve<a class="headerlink" href="#resolve" title="Permalink to this headline">¶</a></h3>
<p>Retrieve location list for object.</p>
</div>
<div class="section" id="log">
<h3>log<a class="headerlink" href="#log" title="Permalink to this headline">¶</a></h3>
<p>Retrieve event logs</p>
</div>
<div class="section" id="set-defaults">
<h3>Set Defaults<a class="headerlink" href="#set-defaults" title="Permalink to this headline">¶</a></h3>
<p>Set some defaults for the command line client:</p>
<div class="highlight-python"><pre>./d1_client_cli/src/d1_client_cli/dataone.py \
--mn-url https://demo1.test.dataone.org/knb/d1/mn/v1 \
--cn-url https://cn-dev.dataone.org/cn/v1 \
--sysmeta-submitter "CN=MATTJTEMP,DC=dataone,DC=org" \
--sysmeta-rightsholder "CN=MATTJTEMP,DC=dataone,DC=org" \
--sysmeta-origin-member-node DEMO1 \
--sysmeta-authoritative-member-node DEMO1 \
--sysmeta-access-policy-public \
--cert-path /etc/dataone/client/certs/myclientcert.pem \
--key-path /etc/dataone/client/certs/myclientcert.pem \
--fields "pid,origin_mn,datemodified,size,objectformat,title" \
--query "*:*" \
--store-config</pre>
</div>
<p>The configuration defaults are stored in $HOME/.d1client.conf</p>
<p>Running:</p>
<div class="highlight-python"><pre>./d1_client_cli/src/d1_client_cli/dataone.py --store-config</pre>
</div>
<p>will generate a configuration with the client defaults.</p>
</div>
</div>
<div class="section" id="user-stories">
<h2>User stories<a class="headerlink" href="#user-stories" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>A scientist can upload a set of Science Objects to benefit from the services
provided by DataONE.</li>
<li>A scientist can discover and download Science Objects to leverage them in
their own research.</li>
<li>A scientist can discover relationships between Science Metadata and Science
Data.</li>
</ul>
<div class="section" id="id1">
<h3>objectformats<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Retrieve list of object formats:</p>
<div class="highlight-python"><pre>$ ./dataone.py objectformats</pre>
</div>
</div>
<div class="section" id="id2">
<h3>resolve<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Retrieve location list for object:</p>
<div class="highlight-python"><pre>$ ./dataone.py resolve my_identifier</pre>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="index.html" title="DataONE Command Line Interface (CLI)"
             >previous</a> |</li>
        <li><a href="index.html">DataONE Command Line Client vbeta documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010,2011 Participating institutions in DataONE.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>